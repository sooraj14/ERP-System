@page
@model ERP_System.Pages.Admin.AccademicStructureModel
@{
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function () {
       
        $("#branch-select").change(function () {
            const value = $(this).val();
            if (value === "add-branch") {
                $("#addbranch").show();
                $("#viewbeanch").hide(); 
                $("#addsubjectdetails").hide();
                $("#viewsubjectdetails").hide();
            } else if (value === "view-branch") {
                $("#viewbeanch").show();
                $("#addbranch").hide();
                $("#addsubjectdetails").hide();
            } else {
                $("#addbranch").hide();
                $("#viewbeanch").hide();
                $("#viewsubjectdetails").hide();
            }
        });

  
        $("#subject-select").change(function () {
            const value = $(this).val();
            if (value === "add-subject") {
                $("#addsubjectdetails").show();
                $("#addbranch").hide();
                $("#viewbeanch").hide();
                $("#viewsubjectdetails").hide();
             
            } else if (value === "view-subject") {
                $("#viewsubjectdetails").show();
               
                $("#addsubjectdetails").hide();
                $("#viewbeanch").hide();    
            } else {
                $("#addsubjectdetails").hide();
                $("#viewsubjectdetails").hide();
            }
        });

      
        $("#addbranchbtn").click(function () {
            $("#textbox-container").append(
                '<input type="text" name="stream_name[]" class="form-control mt-2" placeholder="Enter branch name" />'
            );
        });
    });
</script>

<body style="background-color: #f8f9fa; width:1500px; padding-right:200px">
    <div class="d-flex">
        <!-- Sidebar Navigation -->
        <nav class="bg-dark text-white flex-shrink-0 p-0" style="width: 250px; height: 100vh; margin-left: 0px;">
            <a href="#" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                <span class="fs-4">Admin Dashboard</span>
            </a>
            <hr>
            <ul class="nav nav-pills flex-column mb-auto">
                <li>
                    <select class="form-select" id="branch-select" style="width:250px; margin: 10px 0;">
                        <option value="" disabled selected>Branch</option>
                        <option value="add-branch">Add Branch</option>
                        <option value="view-branch">View Branch</option>
                    </select>
                </li>
                <li>
                    <select class="form-select" id="subject-select" style="width:250px; margin: 10px 0;">
                        <option value="" disabled selected>Subject</option>
                        <option value="add-subject">Add Subject</option>
                        <option value="view-subject">View Subject</option>
                    </select>
                </li>
                <li>
                    <a href="/Index" class="nav-link text-white">Go Back</a>
                </li>
            </ul>
            <hr>
            <div class="text-center">
                <p>&copy; 2024 Admin</p>
            </div>
        </nav>

        <!-- Add Branch Section -->
        <form method="post">
        <div id="addbranch" style="padding:20px; border: 1px solid #ccc; width: 300px; margin-left: 350px; display: none;"> 
            <button type="button" id="addbranchbtn" class="btn btn-primary mb-3">Create Branch</button>
            <button type="submit" id="branchsavebutton" asp-page-handler="SendBranchDetails" class="btn btn-primary mb-3">Save Branch</button>
            <div id="textbox-container"></div>
        </div>
        </form>

        <!-- View Branch Section -->
        <div id="viewbeanch" style="display: none; margin-top: 20px; margin-left: 350px;">
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Branches Available</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                      @* <form method="post">
                    @foreach (var s in Model.stream)
                    {
                      
                            <tr>
                                <td>@s.stream_name</td>
                                <td>
                                    <button asp-page-handler="DeleteBranch" asp-route-stream_id="@s.stream_id" class="btn btn-danger">Delete</button>
                                </td>
                            </tr>
                        
                    }
                    </form> *@
                    @foreach (var s in Model.stream)
                    {
                        <form method="post">
                        <tr>
                            <td>@s.stream_name</td>
                            <td>
                                <button asp-page-handler="DeleteBranch" asp-route-stream_id="@s.stream_id" class="btn btn-danger">Delete</button>
                            </td>
                        </tr>
                        </form>
                    }
                </tbody>
            </table>
        </div>

        <!-- Add Subject Section -->
        <div id="addsubjectdetails" style="display: none; margin-top: 20px; margin-left: 350px;">
            <form method="post">
                <div class="mb-3">
                    <label asp-for="enetrsub.sem_id" class="form-label">Semester Number</label>
                    <input asp-for="enetrsub.sem_id" class="form-control" />
                </div>
                <div class="mb-3">
                    <label asp-for="enetrsub.sub_name" class="form-label">Subject Name</label>
                    <input asp-for="enetrsub.sub_name" class="form-control" />
                </div>
                <select class="form-select" id="streamselect" name="stream_id" style="margin: 10px 0;">
                    <option value="" disabled selected>Select Branch</option>
                    @foreach (var s in Model.stream)
                    {
                        <option value="@s.stream_id">@s.stream_name</option>
                    }
                </select>
                <button type="submit" asp-page-handler="SubjectData" class="btn btn-primary mb-3">Save Subject</button>
            </form>
        </div>

        <!-- View Subject Section -->
        <div id="viewsubjectdetails" style="display: none; margin-top: 20px; margin-left: 350px;">
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Branch</th>
                        <th>Semester</th>
                        <th>Subject Name</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var sd in Model.sub)
                    {
                        <tr>
                            <td>@sd.stream_id</td>
                            <td>@sd.sem_id</td>
                            <td>@sd.sub_name</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <div>
    </div>
</body>
